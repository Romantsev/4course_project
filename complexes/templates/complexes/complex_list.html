{% extends "complexes/base.html" %}
{% block title %}–ñ–∏—Ç–ª–æ–≤—ñ –∫–æ–º–ø–ª–µ–∫—Å–∏{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-baseline mb-3">
  <div>
    <h2 class="page-title mb-1">–ñ–∏—Ç–ª–æ–≤—ñ –∫–æ–º–ø–ª–µ–∫—Å–∏</h2>
  </div>
</div>

<div class="row g-4">
  <div class="col-lg-8">
    <div class="card card-elevated p-3">
      <div class="mb-3 position-relative">
        <form method="get" action="">
          <input type="search" name="q" value="{{ q }}" class="form-control search-input" placeholder="üîç–ü–æ—à—É–∫ –ø–æ –Ω–∞–∑–≤—ñ –∞–±–æ –∞–¥—Ä–µ—Å—ñ">
        </form>
      </div>

      {% if complexes %}
      <div class="row g-3">
        {% for c in complexes %}
        <div class="col-md-6">
          <a href="{% url 'complex_detail' c.pk %}">
            <div class="complex-card p-3 h-100">
              <div class="d-flex justify-content-between align-items-start mb-1">
                <h5 class="mb-0">{{ c.name }}</h5>
                <span class="complex-badge">ID #{{ c.complex_id }}</span>
              </div>
              <div class="text-muted small mb-2">{{ c.address }}</div>
              {% if c.management %}
              <div class="small"><span class="text-muted">–ö–µ—Ä—É—é—á–∞:</span> <span class="fw-semibold">{{ c.management }}</span></div>
              {% endif %}
              {% if c.contact %}
              <div class="small text-muted">–ö–æ–Ω—Ç–∞–∫—Ç: {{ c.contact }}</div>
              {% endif %}
              <div class="mt-2 d-flex justify-content-between align-items-center small text-muted">
                <span>–ë—É–¥–∏–Ω–∫—ñ–≤: {{ c.buildings.count }}</span>
                <span class="text-primary">–ü–µ—Ä–µ–π—Ç–∏</span>
              </div>
            </div>
          </a>
        </div>
        {% endfor %}
      </div>
      {% else %}
      <div class="empty-state">–ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ. –°–ø—Ä–æ–±—É–π—Ç–µ —ñ–Ω—à–∏–π –∑–∞–ø–∏—Ç –∞–±–æ —Å—Ç–≤–æ—Ä—ñ—Ç—å –ø–µ—Ä—à–∏–π –∫–æ–º–ø–ª–µ–∫—Å —É —Ñ–æ—Ä–º—ñ –ø—Ä–∞–≤–æ—Ä—É—á.</div>
      {% endif %}
    </div>
  </div>

  <div class="col-lg-4">
    <div class="card card-elevated p-3">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <h5 class="right-panel-title mb-0">–ù–æ–≤–∏–π –∫–æ–º–ø–ª–µ–∫—Å</h5>
        <span class="badge rounded-pill text-bg-primary">+ –î–æ–¥–∞—Ç–∏</span>
      </div>
      <p class="subtitle mb-3">–®–≤–∏–¥–∫–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–º–ø–ª–µ–∫—Å—É. –í–∫–∞–∂—ñ—Ç—å –Ω–∞–∑–≤—É, –∞–¥—Ä–µ—Å—É, –∫–µ—Ä—É—é—á—É –∫–æ–º–ø–∞–Ω—ñ—é —Ç–∞ –∫–æ–Ω—Ç–∞–∫—Ç–∏.</p>

      <form method="post" class="mt-1">
        {% csrf_token %}
        <div class="mb-2"><label class="form-label">–ù–∞–∑–≤–∞</label>{{ form.name }}</div>
        <div class="mb-2"><label class="form-label">–ê–¥—Ä–µ—Å–∞</label>{{ form.address }}</div>
        <div class="mb-2"><label class="form-label">–ö–µ—Ä—É—é—á–∞ –∫–æ–º–ø–∞–Ω—ñ—è</label>{{ form.management }}</div>
        <div class="mb-3"><label class="form-label">–ö–æ–Ω—Ç–∞–∫—Ç</label>{{ form.contact }}</div>
        <button class="btn btn-primary w-100 btn-pill" type="submit">–°—Ç–≤–æ—Ä–∏—Ç–∏</button>
      </form>
    </div>
  </div>
</div>
{% endblock %}
